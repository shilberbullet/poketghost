# 포켓요괴 (PoketGhost)

## 목차
- [게임 소개](#게임-소개)
- [주요 기능](#주요-기능)
- [실행 방법](#실행-방법)
- [게임 조작](#게임-조작)
- [개발 환경](#개발-환경)
- [프로젝트 구조](#프로젝트-구조)
- [코드 모듈화](#코드-모듈화)
- [정리툴 사용법](#정리툴-사용법)
- [로그 확인 방법](#로그-확인-방법)
- [개발자](#개발자)

## 게임 소개
포켓요괴는 한국 전통 요괴를 수집하고 육성하는 턴제 RPG입니다.
플레이어는 요괴를 모아 전투를 벌이고 아이템을 사용해 회복하며
여러 스테이지를 클리어해 나갑니다.

## 주요 기능
### 1. 요괴 시스템
- 다양한 한국 전통 요괴 수집 및 육성
- 각 요괴마다 고유 특성과 능력치 보유
- 레벨업을 통한 성장과 최대 5마리 편성 가능한 파티 시스템

### 2. 전투 시스템
- 턴제 전투 방식으로 요괴별 고유 기술 사용
- 상성 시스템을 활용한 전략적 전투
- 기절 상태는 빨간색으로 표시

### 3. 아이템 시스템
- 회복 아이템 사용과 기절 요괴 대상 사용 제한
  - 탕국, 막걸리는 기절한 요괴에게 사용 가능
  - 제삿밥, 식혜는 기절한 요괴에게 사용 불가
- 인벤토리 관리 및 사용 후 다음 스테이지로 진행

### 4. 스테이지 시스템
- 일반 스테이지와 보스 스테이지 존재
- 5의 배수 스테이지마다 자동 저장
- 시간대에 따라 다른 요괴 등장

### 5. 저장 시스템
- 수동 저장과 5의 배수 스테이지 자동 저장
- 단일 저장 파일 관리

### 6. 게임 설정
- 텍스트 속도 조절과 표시 모드 선택
- 상성 힌트 표시 설정과 디버그 모드 제공

### 7. 지역 시스템
- 시작 시 경상도 또는 전라도 중 선택하여 모험 시작
- 한반도 지도를 기반으로 지역이 연결되며
  10스테이지마다 방문하지 않은 인접 지역으로 이동

### 8. 로그 시스템
- 게임 시작과 종료, 모든 입출력, 오류, 이벤트 로그 기록

## 실행 방법
1. 게임 실행 파일 `poketghost.exe` 실행
2. 메인 메뉴에서 **새 게임 시작** 또는 **이어하기** 선택
3. 게임 플레이 시작

### 개발 환경 준비
1. MinGW 설치 후 `mingw32-base`와 `mingw32-gcc-g++` 패키지 선택
2. 설치 후 PATH에 `C:\MinGW\bin` 추가
3. [Git](https://git-scm.com/downloads) 설치

### 프로젝트 다운로드
```bash
cd 원하는_폴더
mkdir poketghost
cd poketghost
git clone https://github.com/shilberbullet/poketghost.git
cd poketghost
git pull origin main
```

### 컴파일 및 실행
```bash
gcc -o poketghost.exe src/*.c core/state.c -I include -I core -lm
poketghost.exe
```

## 게임 조작
- 숫자 키를 사용해 메뉴 선택
- 전투 중 기술 사용과 아이템 사용 가능
- 저장 및 불러오기 기능 제공

## 개발 환경
- Windows 10
- GCC 컴파일러
- UTF-8 인코딩 지원

## 프로젝트 구조
```text
poketghost/
├── include/          # 헤더 파일
├── src/             # 소스 파일
└── README.md        # 프로젝트 설명
```

## 코드 모듈화
### 1. 소스 코드 구조
```text
src/
├── main.c             # 메인 게임 로직
├── menu.c             # 메뉴 시스템
├── game.c             # 게임 상태 관리
├── input.c            # 입력 처리
├── text.c             # 텍스트 출력
├── stage.c            # 스테이지 관리
├── yokai.c            # 요괴 시스템
├── move.c             # 기술 시스템
├── battle.c           # 전투 시스템
├── party.c            # 파티 관리
├── savefile.c         # 저장/불러오기
├── item.c             # 아이템 시스템
├── sikhye_system.c    # 식혜 시스템
├── heal_system.c      # 회복 시스템
├── reward.c           # 보상 시스템
└── escape.c           # 도망 시스템
```

### 2. 모듈별 주요 기능
- **main.c**: 게임 초기화와 메인 루프 처리
- **menu.c**: 메인 메뉴 및 설정 메뉴 등 UI 관리
- **game.c**: 게임 상태와 이벤트 처리
- **input.c**: 키보드 입력 처리
- **text.c**: 대화창 및 메시지 출력
- **stage.c**: 스테이지 생성과 보상 처리
- **yokai.c**: 요괴 능력치와 특성 관리
- **move.c**: 기술 사용과 PP 관리
- **battle.c**: 전투 로직과 상태이상 처리
- **party.c**: 파티 관리와 교체 기능
- **savefile.c**: 저장과 불러오기
- **item.c**: 인벤토리 관리
- **sikhye_system.c**: 식혜 아이템 처리
- **heal_system.c**: 회복 로직
- **reward.c**: 전투 보상 관리
- **escape.c**: 도망 처리

### 3. 헤더 파일 구조
```text
include/
├── menu.h
├── game.h
├── input.h
├── text.h
├── stage.h
├── yokai.h
├── move.h
├── battle.h
├── party.h
├── savefile.h
├── item.h
├── sikhye_system.h
├── heal_system.h
├── reward.h
└── escape.h
```

### 4. 모듈화의 장점
1. **코드 재사용성**: 모듈이 독립적으로 동작하여 다른 프로젝트에서도 활용 가능
2. **유지보수성**: 버그 수정과 기능 추가가 용이
3. **테스트 용이성**: 모듈별 단위 테스트와 디버깅이 수월
4. **확장성**: 새로운 기능을 쉽게 추가하고 의존성을 최소화

## 정리툴 사용법
### 1. 요괴 데이터 엑셀 변환
```bash
python 정리툴/yokai_to_excel.py
```
실행 후 같은 폴더에 `요괴_정리.xlsx` 생성

### 2. 요괴 데이터 비교
```bash
python 정리툴/compare_yokai.py
```
추가·삭제·변경된 요괴를 색상으로 구분한 `요괴_비교_결과.xlsx` 생성

### 3. 기술 데이터 엑셀 변환
```bash
python 정리툴/skills_to_excel.py
```
실행 후 `기술_도감.xlsx` 생성

### 4. 기술 데이터 비교
```bash
python 정리툴/compare_skills.py
```
변경 사항을 정리한 `기술_비교_결과.xlsx` 생성

### 5. 누락된 기술 확인
```bash
python 정리툴/check_missing_skills.py
```
요괴가 사용하는데 정의되지 않은 기술을 `누락된_기술.txt`로 출력

### 6. 요괴 데이터 정리 툴
1. `format_yokai_data.py`의 `yokai_data` 변수에 데이터를 입력
2. 아래 명령으로 실행
```bash
python 정리툴/format_yokai_data.py
```
3. 결과는 `정리된_요괴_데이터.txt`에 저장

## 로그 확인 방법
`logs/game.log` 파일에서 게임 실행 로그를 확인할 수 있으며
실행 시마다 자동으로 추가됩니다.

## 개발자
- 이상엽
